<!--<?eclipse.ant.import ?>-->
<project basedir="." name="benchmarks">
	<!-- Set the directory for running the benchmarks -->
	<property name="benchmarks.dir" value="${java.io.tmpdir}"/>
	<property name="resources.dir" value="resources"/>
	<property name="tests.dir" value="${benchmarks.dir}/temp"/>
	
	<tstamp> 
		<format property="time.stamp" pattern="yyyyMMddHHmmss"/>
	</tstamp>
	<property name="log.file" value="${benchmarks.dir}/antlog-${time.stamp}.txt"/>
	<mkdir dir="${benchmarks.dir}"/>
	<record name="${log.file}"/>

	<!-- Default JVM arguments for creating test resources -->
	<property name="creator.vmargs" value="-Xmx8g" />
	<!-- Default JVM argument for traversing and querying test resources -->
	<property name="tester.vmargs" value="-Xmx8g" />
	
	<property name="debug.vmargs" value="" />

	<property name="creator.vmargs.value" value="-Dfile.encoding=utf-8 ${creator.vmargs} ${debug.vmargs}" />
	<property name="tester.vmargs.value" value="-Dfile.encoding=utf-8 ${tester.vmargs} ${debug.vmargs}" />
	
	<taskdef resource="net/sf/antcontrib/antcontrib.properties">
	  <classpath>
	    <pathelement location="${basedir}/lib/ant-contrib.jar"/>
	  </classpath>
	</taskdef>
	
	<macrodef name="timestamp.echo">
		<attribute name="message"/>    
		<sequential> 
			<local name="current.time" />
			<tstamp> 
				<format property="current.time" pattern="dd/MM/yyyy HH:mm:ss"/> 
			</tstamp>          
			<echo message="${current.time} @{message}" />
		</sequential>
	</macrodef>
	
	<target name="extract.resources">
		<if>
			<not>
				<available file="${resources.dir}" type="dir"/>
			</not>
			<then>
				<unzip src="${basedir}/resources.zip" dest="${basedir}"/>
			</then>
		</if>
	</target>
	
	<target name="gendata.boxplot.references" depends="extract.resources">
		<foreach inheritall="true" target="gendata.boxplot.references.file" param="xmi.file">
			<path>
				<fileset dir="${resources.dir}">
					<include name="**/*.xmi"/>
				</fileset>
			</path>
		</foreach>
	</target>
	
    <target name="gendata.boxplot.references.file">
    	<basename property="xmi.filename" file="${xmi.file}" suffix="xmi"/>
		<property name="out" value="${benchmarks.dir}/${xmi.filename}.refereces.boxplot.txt"/>
    	<if>
			<not>
				<available file="${out}" />
			</not>
    		<then>
    			<echo>Creating ${out}</echo>
    			<echo>JVM args: ${creator.vmargs.value}</echo>
    			<stopwatch name="timer"/>
		        <java classname="fr.inria.atlanmod.neoemf.benchmarks.ReferencesCounter" failonerror="true" fork="yes">
		        	<jvmarg line="${creator.vmargs.value}"/>
		            <arg value="-input"/>
		            <arg value="${xmi.file}"/>
		            <arg value="-output"/>
		            <arg value="${out}"/>
		        	<arg value="-input_epackage_class"/>
		        	<arg value ="org.eclipse.gmt.modisco.java.emf.impl.JavaPackageImpl"/>
		        	<arg value="-label"/>
		        	<arg value="${xmi.filename}"/>
		            <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
		        </java>
    			<stopwatch name="timer" action="total"/>
			</then>
    		<else>
    			<echo>${out} already exists</echo>
    		</else>
    	</if>
    </target>
	
    <target name="migrate.cdo.file">
    	<basename property="xmi.filename" file="${xmi.file}" suffix="xmi"/>
		<property name="cdo.out" value="${benchmarks.dir}/${xmi.filename}.cdo.zxmi"/>
    	<if>
			<not>
				<available file="${cdo.out}" />
			</not>
    		<then>
    			<echo>Creating ${cdo.out}</echo>
    			<echo>JVM args: ${creator.vmargs.value}</echo>
    			<stopwatch name="timer"/>
		        <java classname="fr.inria.atlanmod.neoemf.benchmarks.Migrator" failonerror="true" fork="yes">
		        	<jvmarg line="${creator.vmargs.value}"/>
		            <arg value="-input"/>
		            <arg value="${xmi.file}"/>
		            <arg value="-output"/>
		            <arg value="${cdo.out}"/>
		        	<arg value="-input_epackage_class"/>
		        	<arg value ="org.eclipse.gmt.modisco.java.emf.impl.JavaPackageImpl"/>
		        	<arg value="-output_epackage_class"/>
		        	<arg value="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
		            <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
		        </java>
    			<stopwatch name="timer" action="total"/>
			</then>
    		<else>
    			<echo>${cdo.out} already exists</echo>
    		</else>
    	</if>
    </target>
	
    <target name="migrate.neoemf.file">
    	<basename property="xmi.filename" file="${xmi.file}" suffix="xmi"/>
		<property name="neoemf.out" value="${benchmarks.dir}/${xmi.filename}.neoemf.zxmi"/>
    	<if>
			<not>
				<available file="${neoemf.out}" />
			</not>
    		<then>
    			<echo>Creating ${neoemf.out}</echo>
    			<echo>JVM args: ${creator.vmargs.value}</echo>
    			<stopwatch name="timer"/>
		        <java classname="fr.inria.atlanmod.neoemf.benchmarks.Migrator" failonerror="true" fork="yes">
		        	<jvmarg line="${creator.vmargs.value}"/>
		            <arg value="-input"/>
		            <arg value="${xmi.file}"/>
		            <arg value="-output"/>
		            <arg value="${neoemf.out}"/>
		        	<arg value="-input_epackage_class"/>
		        	<arg value ="org.eclipse.gmt.modisco.java.emf.impl.JavaPackageImpl"/>
		        	<arg value="-output_epackage_class"/>
		        	<arg value="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
		            <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
		        </java>
    			<stopwatch name="timer" action="total"/>
			</then>
    		<else>
    			<echo>${neoemf.out} already exists</echo>
    		</else>
    	</if>
    </target>

	<target name="migrate.cdo" depends="extract.resources">
		<foreach inheritall="true" target="migrate.cdo.file" param="xmi.file">
			<path>
				<fileset dir="${resources.dir}">
					<include name="**/*.xmi"/>
				</fileset>
			</path>
		</foreach>
	</target>
	
	<target name="migrate.neoemf" depends="extract.resources">
		<foreach inheritall="true" target="migrate.neoemf.file" param="xmi.file">
			<path>
				<fileset dir="${resources.dir}">
					<include name="**/*.xmi"/>
				</fileset>
			</path>
		</foreach>
	</target>
	
	<target name="migrate.all" depends="extract.resources">
		<antcall target="migrate.cdo" />
		<antcall target="migrate.neoemf" />
	</target>
	
    <target name="gen.test.resource.cdo">
    	<basename property="cdo.zxmi.filename" file="${cdo.zxmi.file}" suffix="cdo.zxmi"/>
		<property name="resource.out" value="${benchmarks.dir}/${cdo.zxmi.filename}.cdoresource"/>
    	<if>
			<not>
				<available file="${resource.out}" />
			</not>
    		<then>
    			<timestamp.echo message="Start" />
    			<echo>Creating ${resource.out}</echo>
    			<echo>JVM args: ${creator.vmargs.value}</echo>
    			<stopwatch name="timer"/>
		        <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoCreator" failonerror="true" fork="yes">
		        	<jvmarg line="${creator.vmargs.value}"/>
		            <arg value="-input"/>
		            <arg value="${cdo.zxmi.file}"/>
		            <arg value="-output"/>
		            <arg value="${resource.out}"/>
		        	<arg value="-epackage_class"/>
		        	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
		        	<arg value="-reponame"/>
		        	<arg value="repo"/>
		            <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
		        </java>
    			<stopwatch name="timer" action="total"/>
    			<timestamp.echo message="End" />
			</then>
    		<else>
    			<echo>${resource.out} already exists</echo>
    		</else>
    	</if>
    </target>
	
    <target name="gen.test.resource.neoemf">
    	<basename property="neoemf.zxmi.filename" file="${neoemf.zxmi.file}" suffix="neoemf.zxmi"/>
		<property name="resource.out" value="${benchmarks.dir}/${neoemf.zxmi.filename}.neoemfresource"/>
		<property name="resource.properties.out" value="${benchmarks.dir}/${neoemf.zxmi.filename}.neoemfresource.properties"/>
    	<if>
			<not>
				<available file="${resource.out}" />
			</not>
    		<then>
    			<!-- Modify NeoEMF resource load/save properties here -->
    			<propertyfile file="${resource.properties.out}">
    			  <entry key="blueprints.graph" value="com.tinkerpop.blueprints.impls.neo4j.Neo4jGraph"/>
    			</propertyfile>
    			<timestamp.echo message="Start" />
    			<echo>Creating ${resource.out}</echo>
    			<echo>JVM args: ${creator.vmargs.value}</echo>
    			<stopwatch name="timer"/>
		        <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFCreator" failonerror="true" fork="yes">
		        	<jvmarg line="${creator.vmargs.value}"/>
		            <arg value="-input"/>
		            <arg value="${neoemf.zxmi.file}"/>
		            <arg value="-output"/>
		            <arg value="${resource.out}"/>
		        	<arg value="-epackage_class"/>
		        	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
		        	<arg value="-options_file"/>
		        	<arg value="${resource.properties.out}"/>
		            <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
		        </java>
    			<stopwatch name="timer" action="total"/>
    			<timestamp.echo message="End" />
			</then>
    		<else>
    			<echo>${resource.out} already exists</echo>
    		</else>
    	</if>
    </target>
	
    <target name="gen.test.resource.neoemf.map">
    	<basename property="neoemf.zxmi.filename" file="${neoemf.zxmi.file}" suffix="neoemf.zxmi"/>
		<property name="resource.out" value="${benchmarks.dir}/${neoemf.zxmi.filename}.neoemfmapresource"/>
    	<if>
			<not>
				<available file="${resource.out}" />
			</not>
    		<then>
    			<timestamp.echo message="Start" />
    			<echo>Creating ${resource.out}</echo>
    			<echo>JVM args: ${creator.vmargs.value}</echo>
    			<stopwatch name="timer"/>
		        <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapCreator" failonerror="true" fork="yes">
		        	<jvmarg line="${creator.vmargs.value}"/>
		            <arg value="-input"/>
		            <arg value="${neoemf.zxmi.file}"/>
		            <arg value="-output"/>
		            <arg value="${resource.out}"/>
		        	<arg value="-epackage_class"/>
		        	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
		            <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
		        </java>
    			<stopwatch name="timer" action="total"/>
    			<timestamp.echo message="End" />
			</then>
    		<else>
    			<echo>${resource.out} already exists</echo>
    		</else>
    	</if>
    </target>
	
	<target name="gen.test.resources.cdo">
		<foreach inheritall="true" target="gen.test.resource.cdo" param="cdo.zxmi.file">
			<path>
				<fileset dir="${benchmarks.dir}">
					<include name="**/*.cdo.zxmi"/>
				</fileset>
			</path>
		</foreach>
	</target>
	
	<target name="gen.test.resources.neoemf">
		<foreach inheritall="true" target="gen.test.resource.neoemf" param="neoemf.zxmi.file">
			<path>
				<fileset dir="${benchmarks.dir}">
					<include name="**/*.neoemf.zxmi"/>
				</fileset>
			</path>
		</foreach>
	</target>
	
	<target name="gen.test.resources.neoemf.map">
		<foreach inheritall="true" target="gen.test.resource.neoemf.map" param="neoemf.zxmi.file">
			<path>
				<fileset dir="${benchmarks.dir}">
					<include name="**/*.neoemf.zxmi"/>
				</fileset>
			</path>
		</foreach>
	</target>
	
	<target name="gen.test.resources.all">
		<antcall target="gen.test.resources.cdo" />
		<!--<antcall target="gen.test.resources.neoemf" />-->
		<antcall target="gen.test.resources.neoemf.map" />
	</target>
	
	<target name="prepare.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
	</target>
	
	<target name="prepare.test.resources.neoemf">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfresource/**"/>
			</fileset>
		</copy>
	</target>
	
	<target name="prepare.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
	</target>
	
    <target name="traverse.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Traversing ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoTraverser" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="traverse.resource.neoemf">
		<timestamp.echo message="Start" />
		<echo>Traversing ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFTraverser" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	    	<arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="traverse.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Traversing ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapTraverser" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="traverse.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<antcall target="prepare.test.resources.cdo" />
		<foreach inheritall="true" target="traverse.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="traverse.resources.neoemf" depends="migrate.neoemf, gen.test.resources.neoemf">
		<antcall target="prepare.test.resources.neoemf" />
		<foreach inheritall="true" target="traverse.resource.neoemf" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="traverse.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<antcall target="prepare.test.resources.neoemf.map" />
		<foreach inheritall="true" target="traverse.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="traverse.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="traverse.resources.cdo" />
		<antcall target="traverse.resources.neoemf" />
		<antcall target="traverse.resources.neoemf.map" />
	</target>
	
	<target name="query.classdecl.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Querying ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoQueryClassDeclarationAttributes" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.classdecl.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapQueryClassDeclarationAttributes" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="query.classdecl.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.classdecl.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.classdecl.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.classdecl.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.classdecl.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="query.classdecl.resources.cdo" />
		<antcall target="query.classdecl.resources.neoemf.map" />
	</target>

    <target name="query.grabats.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Querying ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoQueryGrabats" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.grabats.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapQueryGrabats" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="query.grabats.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.grabats.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.grabats.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.grabats.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.grabats.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="query.grabats.resources.cdo" />
		<antcall target="query.grabats.resources.neoemf.map" />
	</target>

    <target name="query.invmethods.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Querying ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoQueryInvisibleMethodDeclarations" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.invmethods.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapQueryInvisibleMethodDeclarations" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="query.invmethods.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.invmethods.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.invmethods.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.invmethods.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.invmethods.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="query.invmethods.resources.cdo" />
		<antcall target="query.invmethods.resources.neoemf.map" />
	</target>

    <target name="query.orphan.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Querying ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoQueryOrphanNonPrimitiveTypes" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.orphan.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapQueryOrphanNonPrimitiveTypes" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="query.orphan.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.orphan.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.orphan.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.orphan.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.orphan.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="query.orphan.resources.cdo" />
		<antcall target="query.orphan.resources.neoemf.map" />
	</target>

    <target name="query.rename.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Querying ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoQueryRenameAllMethods" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.rename.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapQueryRenameAllMethods" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="query.rename.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.rename.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.rename.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.rename.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.rename.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="query.rename.resources.cdo" />
		<antcall target="query.rename.resources.neoemf.map" />
	</target>

    <target name="query.thrownexceptions.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Querying ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoQueryThrownExceptionsPerPackage" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.thrownexceptions.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapQueryThrownExceptionsPerPackage" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="query.thrownexceptions.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.thrownexceptions.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.thrownexceptions.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.thrownexceptions.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.thrownexceptions.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="query.thrownexceptions.resources.cdo" />
		<antcall target="query.thrownexceptions.resources.neoemf.map" />
	</target>

    <target name="query.unusedmethods.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Querying ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoQueryUnusedMethodsList" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.unusedmethods.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapQueryUnusedMethodsList" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="query.unusedmethods.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.unusedmethods.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.unusedmethods.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.unusedmethods.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.unusedmethods.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="query.unusedmethods.resources.cdo" />
		<antcall target="query.unusedmethods.resources.neoemf.map" />
	</target>

    <target name="query.unusedmethods.comples.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Querying ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoQueryLoop" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.unusedmethods.complex.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapQueryLoop" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="query.unusedmethods.complex.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.loop.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.unusedmethods.complex.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.loop.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.unusedmethods.complex.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="query.loop.resources.cdo" />
		<antcall target="query.loop.resources.neoemf.map" />
	</target>
	
	<!--
    <target name="query.list.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Querying ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoQueryList" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.list.resource.neoemf">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFQueryList" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.list.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapQueryList" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="query.list.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.list.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.list.resources.neoemf" depends="migrate.neoemf, gen.test.resources.neoemf">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.list.resource.neoemf" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfresource"/>
				</dirset>
			</path>
		</foreach>
	</target>

	<target name="query.list.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.list.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.list.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="query.list.resources.cdo" />
		<antcall target="query.list.resources.neoemf" />
		<antcall target="query.list.resources.neoemf.map" />
	</target>
	
    <target name="query.loop.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Querying ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoQueryLoop" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.loop.resource.neoemf">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFQueryLoop" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.loop.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapQueryLoop" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="query.loop.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.loop.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.loop.resources.neoemf" depends="migrate.neoemf, gen.test.resources.neoemf">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.loop.resource.neoemf" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.loop.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.loop.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.loop.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="query.loop.resources.cdo" />
		<antcall target="query.loop.resources.neoemf" />
		<antcall target="query.loop.resources.neoemf.map" />
	</target>
	
    <target name="query.consecutive.resource.cdo">
		<timestamp.echo message="Start" />
		<echo>Querying ${cdoresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.CdoQuery" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${cdoresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.cdo.impl.JavaPackageImpl"/>
	    	<arg value="-reponame"/>
	    	<arg value="repo"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.consecutive.resource.neoemf">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFQuery" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
    <target name="query.consecutive.resource.neoemf.map">
		<timestamp.echo message="Start" />
		<echo>Querying ${neoemfresource.dir}</echo>
		<echo>JVM args: ${tester.vmargs.value}</echo>
		<stopwatch name="timer"/>
	    <java classname="fr.inria.atlanmod.neoemf.benchmarks.NeoEMFMapQuery" failonerror="true" fork="yes">
        	<jvmarg line="${tester.vmargs.value}"/>
	        <arg value="-input"/>
	        <arg value="${neoemfresource.dir}"/>
	    	<arg value="-epackage_class"/>
	    	<arg value ="org.eclipse.gmt.modisco.java.neoemf.impl.JavaPackageImpl"/>
	        <classpath refid="fr.inria.atlanmod.neoemf.benchmarks.classpath"/>
	    </java>
		<stopwatch name="timer" action="total"/>
		<timestamp.echo message="End" />
    </target>
	
	<target name="query.consecutive.resources.cdo" depends="migrate.cdo, gen.test.resources.cdo">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.cdoresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.consecutive.resource.cdo" param="cdoresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.cdoresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.consecutive.resources.neoemf" depends="migrate.neoemf, gen.test.resources.neoemf">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.consecutive.resource.neoemf" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.consecutive.resources.neoemf.map" depends="migrate.neoemf, gen.test.resources.neoemf.map">
		<delete dir="${tests.dir}" failonerror="false"/>
		<mkdir dir="${tests.dir}"/>
		<copy todir="${tests.dir}">
			<fileset dir="${benchmarks.dir}">
				<include name="*.neoemfmapresource/**"/>
			</fileset>
		</copy>
		<foreach inheritall="true" target="query.consecutive.resource.neoemf.map" param="neoemfresource.dir">
			<path>
				<dirset dir="${tests.dir}">
					<include name="**/*.neoemfmapresource"/>
				</dirset>
			</path>
		</foreach>
	</target>
	
	<target name="query.consecutive.resources.all" depends="migrate.all, gen.test.resources.all">
		<antcall target="query.consecutive.resources.cdo" />
		<antcall target="query.consecutive.resources.neoemf" />
		<antcall target="query.consecutive.resources.neoemf.map" />
	</target>
	-->
	
</project>

